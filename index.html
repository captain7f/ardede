<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>Arabischâ€‘Deutsch SÃ¤tze â€“ Kategorien & Unterkategorien</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <style>
    :root {
      --bg: #f1f1f1; --text: #222; --card: #fff; --hover: #f9f9f9;
      --dark-bg: #1e1e1e; --dark-text: #e0e0e0; --dark-card: #2a2a2a; --dark-hover: #333;
    }
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: var(--bg);
      color: var(--text);
    }
    body.dark {
      background: var(--dark-bg);
      color: var(--dark-text);
    }
    .container {
      display: flex;
      min-height: 100vh;
    }
    .sidebar {
      width: 250px;
      background: #2f2f35;
      color: white;
      padding: 20px;
      box-sizing: border-box;
      transition: transform .3s ease;
    }
    .sidebar.hidden {
      transform: translateX(-100%);
    }
    .topbar {
      position: sticky;
      top: 0;
      z-index: 100;
      background: var(--card);
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 20px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    }
    .menu-btn, .toggle-mode {
      background: none;
      border: none;
      cursor: pointer;
      font-size: 1.7em;
      color: inherit;
    }
    .main {
      flex: 1;
      overflow-y: auto;
    }
    #mainTitle {
      font-size: 1.2em;
      font-weight: bold;
    }
    .categories h3 {
      cursor: pointer;
      margin: 10px 0;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .subcategories {
      margin: 0 0 8px 15px;
      display: none;
      flex-direction: column;
      gap: 6px;
    }
    .subcategory {
      padding: 6px 10px;
      background-color: rgba(255,255,255,0.05);
      border-radius: 5px;
      cursor: pointer;
      transition: background 0.3s;
    }
    .subcategory:hover {
      background-color: rgba(255,255,255,0.15);
    }
    .sentence {
      background: var(--card);
      margin: 10px 20px;
      padding: 15px;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.05);
      cursor: pointer;
      transition: transform .2s;
    }
    body.dark .sentence {
      background: var(--dark-card);
    }
    .sentence:hover {
      transform: scale(1.01);
      background: var(--hover);
    }
    body.dark .sentence:hover {
      background: var(--dark-hover);
    }
    .arabic {
      font-weight: bold;
      direction: rtl;
      text-align: right;
      font-size: 1.3em;
    }
    .translation {
      margin-top: 12px;
      display: none;
      flex-direction: column;
      gap: 8px;
    }
    .translation-line {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .hochdeutsch { color: #43a047; }
    .umgangssprache { color: #ab47bc; }
    .speak-btn {
      border: none;
      border-radius: 50%;
      width: 35px;
      height: 35px;
      font-size: 1.1em;
      cursor: pointer;
      transition: opacity .3s;
    }
    .speak-hoch { background: #a5d6a7; }
    .speak-umgang { background: #e1bee7; }
    .speak-btn:hover { opacity: 0.9; }
    #helpBox {
      display: none;
      position: fixed;
      top: 20%;
      left: 50%;
      transform: translateX(-50%);
      background: white;
      color: black;
      padding: 20px;
      border-radius: 12px;
      max-width: 90%;
      box-shadow: 0 4px 20px rgba(0,0,0,0.3);
      z-index: 9999;
      font-size: 1em;
      line-height: 1.5;
    }
    @media (max-width: 768px) {
      .container { flex-direction: column; }
      .sidebar { position: absolute; top: 0; left: 0; height: 100%; z-index: 100; }
    }
  </style>
</head>
<body>
  <div class="topbar">
    <button class="menu-btn" onclick="toggleSidebar()">â˜°</button>
    <h2 id="mainTitle">WÃ¤hle eine Kategorie</h2>
    <div>
      <button class="toggle-mode" onclick="toggleDarkMode()">ğŸŒ™</button>
      <button class="toggle-mode" onclick="showHelp()">â”</button>
    </div>
  </div>
  <div class="container">
    <div class="sidebar hidden" id="sidebar">
      <h2>Kategorien</h2>
      <div id="categoryContainer" class="categories">Lade Kategorienâ€¦</div>
    </div>
    <div class="main">
      <div style="height:15px;"></div>
      <div id="sentenceList"></div>
    </div>
  </div>

  <div id="helpBox">
    <strong>Ø·Ø±ÙŠÙ‚Ø© Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…ÙˆÙ‚Ø¹:</strong><br><br>
    1. Ø§Ø®ØªØ± Ø£ÙˆÙ„Ù‹Ø§ Ù‚Ø³Ù…Ù‹Ø§ Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ©ØŒ Ø«Ù… Ø§Ø®ØªØ± Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹ Ø§Ù„ÙØ±Ø¹ÙŠ.<br>
    2. Ø³ØªØ¸Ù‡Ø± Ù„Ùƒ Ø¬Ù…Ù„ Ø¨Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©. Ø­Ø§ÙˆÙ„ Ø£Ù† ØªØªØ±Ø¬Ù…Ù‡Ø§ Ø¥Ù„Ù‰ Ø§Ù„Ø£Ù„Ù…Ø§Ù†ÙŠØ© Ø¨Ù†ÙØ³Ùƒ.<br>
    3. Ø¨Ø¹Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø¬Ù…Ù„Ø©ØŒ Ø³ØªØ¸Ù‡Ø± Ø§Ù„ØªØ±Ø¬Ù…Ø© Ø§Ù„Ø£Ù„Ù…Ø§Ù†ÙŠØ© Ø§Ù„ÙØµØ­Ù‰ ÙˆØ§Ù„Ø¹Ø§Ù…ÙŠØ©.<br>
    4. ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± ğŸ—£ï¸ Ù„ØªØ³Ù…Ø¹ Ù†Ø·Ù‚ Ø§Ù„ØªØ±Ø¬Ù…Ø©.<br>
    5. Ø§Ø³ØªÙØ¯ Ù…Ù† Ø§Ù„ÙØµØ­Ù‰ Ù„ØªØ­Ø³ÙŠÙ† Ù„ØºØªÙƒØŒ ÙˆÙ…Ù† Ø§Ù„Ø¹Ø§Ù…ÙŠØ© Ù„ØªØ¹Ù„Ù… Ø§Ù„ØªØ¹Ø¨ÙŠØ± Ø§Ù„ÙŠÙˆÙ…ÙŠ.<br><br>
    <button onclick="hideHelp()" style="margin-top:10px; background:#2f2f35; color:white; border:none; padding:6px 12px; border-radius:5px; cursor:pointer;">Ø¥ØºÙ„Ø§Ù‚</button>
  </div>
<script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
<script>
  const baseURL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vSjJe2W1HVn2k7ivB1fYfpDBZ9x43pKPDyQ9cxGFnXMs1OjxjtH1Ht7WqkOaTuN1XlBNAhW8f178fu3/pub?output=csv";

  function toggleSidebar() {
    document.getElementById("sidebar").classList.toggle("hidden");
  }

  function toggleDarkMode() {
    const isDark = document.body.classList.toggle("dark");
    localStorage.setItem("darkMode", isDark ? "on" : "off");
  }
  if (localStorage.getItem("darkMode") === "on") {
    document.body.classList.add("dark");
  }

  function showHelp() {
    document.getElementById("helpBox").style.display = "block";
  }

  function hideHelp() {
    document.getElementById("helpBox").style.display = "none";
  }

  function loadCategories() {
    Papa.parse(baseURL, {
      download: true,
      header: true,
      complete(r) {
        const cats = {};
        r.data.forEach(row => {
          if (row.main && row.name && row.gid) {
            cats[row.main] = cats[row.main] || [];
            cats[row.main].push({ name: row.name, gid: row.gid });
          }
        });
        const cont = document.getElementById("categoryContainer");
        cont.innerHTML = "";
        for (const main in cats) {
          const h3 = document.createElement("h3");
          const ico = document.createElement("span"); ico.textContent = "â–¼";
          h3.textContent = main; h3.appendChild(ico);
          const sub = document.createElement("div");
          sub.className = "subcategories";
          cats[main].forEach(s => {
            const d = document.createElement("div");
            d.className = "subcategory";
            d.textContent = s.name;
            d.onclick = () => {
              loadSentences(s.name, s.gid);
              toggleSidebar();
              cont.querySelectorAll('.subcategories').forEach(el => el.style.display = 'none');
              ico.textContent = "â–¼";
            };
            sub.appendChild(d);
          });
          h3.onclick = () => {
            const showing = sub.style.display === "flex";
            sub.style.display = showing ? "none" : "flex";
            ico.textContent = showing ? "â–¼" : "â–²";
          };
          cont.appendChild(h3);
          cont.appendChild(sub);
        }
      }
    });
  }

  function loadSentences(title, gid) {
    document.getElementById("mainTitle").textContent = title;
    const sl = document.getElementById("sentenceList");
    sl.innerHTML = "Lade SÃ¤tzeâ€¦";
    const url = baseURL.replace("output=csv", "gid=" + gid + "&single=true&output=csv");
    Papa.parse(url, {
      download: true,
      header: true,
      complete(r) {
        sl.innerHTML = "";
        r.data.forEach(row => {
          if (row.Arabisch) {
            const div = document.createElement("div");
            div.className = "sentence";
            div.innerHTML = `
              <div class="arabic">${row.Arabisch}</div>
              <div class="translation">
                <div class="translation-line">
                  <div class="hochdeutsch">${row.Hochdeutsch || ""}</div>
                  <button class="speak-btn speak-hoch" title="Hochdeutsch vorlesen">ğŸ—£ï¸</button>
                </div>
                <div class="translation-line">
                  <div class="umgangssprache">${row.Umgangssprache || ""}</div>
                  <button class="speak-btn speak-umgang" title="Umgangssprache vorlesen">ğŸ—£ï¸</button>
                </div>
              </div>`;
            div.onclick = () => {
              const trans = div.querySelector(".translation");
              trans.style.display = trans.style.display === "none" ? "flex" : "none";
            };
            div.querySelector(".speak-hoch").onclick = function (e) {
              e.stopPropagation();
              const ut = new SpeechSynthesisUtterance(row.Hochdeutsch || "");
              ut.lang = "de-DE";
              window.speechSynthesis.speak(ut);
            };
            div.querySelector(".speak-umgang").onclick = function (e) {
              e.stopPropagation();
              const ut = new SpeechSynthesisUtterance(row.Umgangssprache || "");
              ut.lang = "de-DE";
              window.speechSynthesis.speak(ut);
            };
            sl.appendChild(div);
          }
        });
      }
    });
  }

  loadCategories();
</script>
</body>
</html>
